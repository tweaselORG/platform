---
import { t } from '../../i18n/server';
import Base from '../../layouts/base.astro';
import { absUrl } from '../../lib/util';
import TextRaw from '../TextRaw.astro';
import { dpas } from '../../lib/dpas';
import RadioForm from '../RadioForm.astro';

interface Props {
    token: string;
    complaintAuthority: string | null;
}

const { token, complaintAuthority } = Astro.props;
---

<Base title={t('complaint-landing-askAuthority', 'heading')}>
    <p>
        <TextRaw scope="complaint-landing-askAuthority" id="question" />
    </p>

    <RadioForm
        actionUrl={absUrl(`/p/${token}/complain/askAuthority/answer`)}
        options={Object.keys(dpas).reduce((agg: Record<string, string>, key: string) => {
            agg[key] = dpas[key]!.name;
            return agg;
        }, {})}
        value={complaintAuthority}
        idPrefix="askAuthority"
    />
</Base>
